name: CI - Quality Software

on:
  push:
    branches:
      - main
      - feat/**
  pull_request:
    branches:
      - main

jobs:
  ci:
    name: Continuous Integration
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do código
        uses: actions/checkout@v4

      - name: Verificar se a pasta src existe
        run: test -d src

      - name: Verificar se o CSS está no caminho correto
        run: test -f src/css/style.css

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Instalar HTMLHint
        run: npm install -g htmlhint

      - name: Lint HTML (HTMLHint)
        run: htmlhint src/index.html

      - name: Verificar tag footer com nome do aluno
        run: |
          if ! grep -q "<footer>.*Matheus Meigre.*</footer>" src/index.html; then
            echo "Erro: O HTML deve conter uma tag <footer> com o nome do aluno Matheus Meigre"
            exit 1
          fi

      - name: Mensagem de Sucesso
        run: echo "O código do aluno Matheus Meigre foi auditado, está seguindo as normas corretas e está pronto para o deploy!"
